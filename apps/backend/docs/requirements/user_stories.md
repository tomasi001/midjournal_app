# User Stories

This document outlines the user stories for the core features of the MidJournal application, updated with a deeper understanding of the product vision.

---

### Feature: Input & Data Population

#### User Story: Create a New Text-Based Journal Entry

**As a:** Reflective Journaler
**I want to:** write and save a new journal entry using a simple text editor
**So that I can:** quickly capture my thoughts, feelings, and events of the day.

**Acceptance Criteria:**

- The system must provide a rich text editor for creating entries.
- The user must be able to save the entry, which is then associated with their user account and the current date.
- The system must confirm that the entry has been saved successfully.
- If the save operation fails, the system must notify the user and preserve the entered text.

**Notes/Assumptions:**

- Assumes the user is already logged in.

---

#### User Story: Create a New Voice-Based Journal Entry

**As a:** Casual Note-Taker
**I want to:** record a short audio clip and have it transcribed into a journal entry
**So that I can:** capture thoughts on the go without typing.

**Acceptance Criteria:**

- The system must allow a user to start and stop an audio recording.
- The recorded audio must be sent for transcription upon completion.
- The resulting text transcript must be saved as a new journal entry, linked to the original audio.
- The user must be notified of the successful transcription and saving.

**Notes/Assumptions:**

- This functionality is a precursor to the full voice-to-voice conversation feature.

---

#### User Story: Bulk Upload Existing Personal Documents

**As a:** New user with an existing body of personal writings
**I want to:** upload a collection of my documents (e.g., .txt, .md, .pdf, exported chat logs) in a single batch
**So that I can:** instantly populate my journal with my entire history of thoughts to make it immediately useful.

**Acceptance Criteria:**

- The system must provide an interface for selecting multiple files or a single `.zip` archive for upload.
- The upload process must run asynchronously in the background, managed by a queue.
- The user must be notified when the import process begins and when it is complete.
- The system must correctly parse supported file types.
- An error processing a single file must not halt the entire batch; errors should be logged for the user to review.

**Notes/Assumptions:**

- This is critical for making the RAG system powerful from day one.

---

### Feature: Conversational Interface & Querying

#### User Story: Ask a Question and Get a Grounded Answer

**As a:** Knowledge Seeker
**I want to:** ask a question in a chat interface, like "What was I thinking about last month regarding my project?"
**So that I can:** easily retrieve relevant thoughts and memories from my journal history.

**Acceptance Criteria:**

- The user can type a question into a chat input field.
- The system searches the user's private data corpus to find relevant context.
- The LLM generates a concise, conversational answer based _exclusively_ on the retrieved context.
- The system must not use external knowledge or invent information.
- The response is displayed to the user in the chat interface.

---

#### User Story: Have a Full Voice-to-Voice Conversation

**As a:** Casual Note-Taker who prefers speaking
**I want to:** have a complete conversation with my journal using only my voice and hear the answers spoken back to me
**So that I can:** interact hands-free in a more natural, conversational flow.

**Acceptance Criteria:**

- The user can enable a "Voice Mode".
- In this mode, the system actively listens for the user's spoken query.
- The system transcribes the speech to text, retrieves the answer, and uses Text-to-Speech (TTS) to read the response aloud.
- The system then returns to a listening state for the next query.

---

#### User Story: Receive Personalized Question Suggestions

**As a:** Reflective Journaler who isn't sure what to ask
**I want to:** see a list of personalized, suggested questions based on my past entries
**So that I can:** discover interesting connections and themes in my thoughts that I might not have considered.

**Acceptance Criteria:**

- When the chat interface is opened, the system displays 3-5 suggested questions.
- These questions are intelligently generated by an LLM that has analyzed the user's data for prominent themes.
- Clicking a suggested question immediately executes the query.

---

### Feature: Insight Generation

#### User Story: Generate Custom Insights with Natural Language

**As a:** Knowledge Seeker
**I want to:** ask for specific insights, like "Show me a timeline of my mood about 'Project X'" and see a visual answer
**So that I can:** explore my data in a flexible and visual way, beyond predefined reports.

**Acceptance Criteria:**

- An "Insights" section allows the user to type natural language queries for data analysis.
- The system uses an LLM to interpret the query and generate an appropriate data summary or visualization (e.g., bar chart, line graph, table).
- The generated insight is displayed to the user.
- The system can handle queries about trends, frequencies, sentiment over time, and correlations.

---

### Feature: Journaling Reward & Daily Analysis

#### User Story: Receive a Daily Entry Analysis and Generated Image

**As a:** User who enjoys creative expression and reflection
**I want to:** receive a detailed analysis of my daily journal entry and a unique, AI-generated image based on it
**So that I can:** get immediate feedback on my thoughts and be motivated to journal consistently.

**Acceptance Criteria:**

- After saving a new daily entry, an analysis is automatically triggered.
- The analysis identifies key themes, sentiment, and patterns within the entry and explains how it connects to the user's broader data corpus.
- Based on this analysis, the system generates a thematically relevant image.
- The analysis and the image are presented to the user and saved with the journal entry.
